{
  "url": "https://api.stacksdata.info/v1/sql",
  "method": "POST",
  "table": "block_time",
  "query": [
    "with base2 as (",
    "    with base1 as (",
    "        select",
    "            distinct t.block_height,t.block_time::timestamptz",
    "        as",
    "            block_time",
    "        from",
    "            transactions t",
    "        where",
    "            t.block_height>get_max_block() - 10",
    "        order by",
    "            t.block_height",
    "        desc",
    "    )",
    "    select",
    "        b2.block_height,b1.block_time-b2.block_time",
    "    as",
    "        block_duration",
    "    from",
    "        base1 b1",
    "    join",
    "        base1 b2",
    "    on",
    "        b1.block_height = b2.block_height-1",
    ")",
    "select",
    "    round(sum(EXTRACT (EPOCH FROM block_duration)/60)/-10, 2)",
    "as",
    "    data",
    "from",
    "    base2"
  ]
}
